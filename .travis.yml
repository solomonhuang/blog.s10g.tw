language: python  
python:  
  - '3.5'

cache:
  apt: true
  pip: true
  directories:
    - $HOME/.cache/pip
    - $HOME/pelican-plugins

branches:  
  only:  
  - master

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install graphviz -qq
  - git clone -b master https://github.com/getpelican/pelican-plugins.git $HOME/pelican-plugins || (cd $HOME/pelican-plugins && git pull)

install:  
  - pip install -r requirements.txt

script:  
  - make travis

